---
import type { lang } from "@interfaces/lang";

import DatePicker from "@/widgets/DatePicker.astro";
import Button from "@/widgets/Button.astro";

import SvgEnglish from "@assets/english.svg";
import SvgSpanish from "@assets/spanish.svg";
import SvgLogo from "@assets/logo.svg";

import config from "@data/config.json";
import labels from "@lang/global.json";
import menu from "@data/menu.json";

interface Props {
  lang: lang;
}

const { lang } = Astro.props;
---


<!-- BEGIN MOBILE MENU -->
<div class="absolute desktop-1:hidden">
  <div class="relative z-10 top-6 left-6 aspect-square">
    <a href={`/${lang}/`} target="_self">
      <SvgLogo class="logo-svg w-20 mx-auto" />
    </a>
  </div>
  <nav id="menu-mobile" class="fixed z-10 right-0 top-4 flex text-right justify-end desktop-1:hidden">
    <label class="relative z-40 cursor-pointer px-3 py-6 right-4 bg-white/50" for="mobile-menu">
      <input class="peer hidden" type="checkbox" id="mobile-menu" />
      <div class="
          relative 
          z-50
          block 
          h-0.5
          w-7 
          bg-foreground-1
          content-[''] 
          before:absolute 
          before:top-[-0.35rem] 
          before:z-50 
          before:block 
          before:h-0.5
          before:w-full 
          before:bg-foreground-1 
          before:transition-all 
          before:duration-200 
          before:ease-out 
          before:content-[''] 
          after:absolute 
          after:bottom-[-0.35rem] 
          after:block 
          after:h-0.5
          after:w-full 
          after:bg-foreground-1 
          after:transition-all 
          after:duration-200 
          after:ease-out 
          after:content-[''] 
          peer-checked:bg-transparent 
          peer-checked:before:top-0 
          peer-checked:before:w-full 
          peer-checked:before:rotate-45 
          peer-checked:before:transform 
          peer-checked:after:bottom-0 
          peer-checked:after:w-full 
          peer-checked:after:-rotate-45 
          peer-checked:after:transform
      "></div>
      <!-- BEGIN OVERLAY -->
      <div class="fixed inset-0 z-40 hidden h-full w-full bg-overlay backdrop-blur-sm peer-checked:block">&nbsp;</div>
      <!-- END OVERLAY -->
      <div class="fixed top-0 right-0 z-40 h-full w-full translate-x-full overflow-y-auto overscroll-y-none transition duration-500 peer-checked:translate-x-0">
        <div class="float-right min-h-full w-45 bg-background px-6 pt-12 shadow-2xl tablet:w-60">
          <div class="mt-12 tablet:pr-8">
            <ul class="font-title *:border-foreground-1/10 *:border-t [&>*:last-child]:border-b [&>*:last-child]:pb-2">
              {
                menu.map(({label, href, target}) => {
                  return (
                    <li class="my-1 pt-2 block">
                      <a href={href} class="px-3 py-2 text-right block" target={target}>{label[lang]}</a>
                    </li>
                  )
                })
              }
            </ul>
            <div class="mt-12 pr-4 flex flex-row gap-x-2 justify-end item-center">
              {
                lang === 'es' ?
                <>
                  <a href="/en/" target="_self" class="text-xs">EN</a>
                  <a href="/en/" target="_self">
                    <SvgEnglish class="w-8" />
                  </a>
                </>
                :
                <>
                  <a href="/es/" target="_self" class="text-xs">ES</a>
                  <a href="/es/" target="_self">
                    <SvgSpanish class="w-8" />
                  </a>
                </>
              }
            </div>
            </div>
          <div class="text-center mt-16 aspect-square">
            <SvgLogo class="logo-svg w-24 mx-auto" />
          </div>
        </div>
      </div>
    </label>
  </nav>
</div>
<!-- END MOBILE MENU -->

<!-- BEGIN DESKTOP MENU -->
<div class="relative mt-8 box-container w-full hidden items-center gap-x-4 desktop-1:flex desktop-1:flex-row">
  <div class="basis-2/12">
    <SvgLogo class="logo-svg w-20 ml-auto" />
  </div>
  <nav id="menu-desktop" class="basis-5/12">
    <ul class="flex justify-center flex-row gap-x-8 p-0 font-title text-md">
      {
        menu.map(({label, href, target}) => {
          return (
            <li class="">
              <a href={href} class="desktop-1:px-3 lg:px-4 xl:px-3/6" target={target}>
                <span class="py-1">{label[lang]}</span>
              </a>
            </li>
          )
        })
      }
    </ul>
  </nav>
  <div class="flex flex-row base-3/12 items-center justify-center gap-x-2">
    <DatePicker lang={lang} placeHolder={labels[lang].DATE_RANGE} position="desktop" xClass="border-foreground-1 border-1" />
    <Button href={config[lang].URL_SITEMINDER} target="_blank" xClass="btnBooking">{labels[lang].BOOKING}</Button>
  </div>
  <div class="basis-2/12 flex flex-row gap-x-2 justify-start item-center pl-5">
    {
      lang === 'es' ?
      <>
        <a href="/en/" target="_self" class="text-xs">EN</a>
        <a href="/en/" target="_self">
          <SvgEnglish class="w-8" />
        </a>
      </>
      :
      <>
        <a href="/es/" target="_self" class="text-xs">ES</a>
        <a href="/es/" target="_self">
          <SvgSpanish class="w-8" />
        </a>
      </>
    }
  </div>
</div>
<!-- END DESKTOP MENU -->